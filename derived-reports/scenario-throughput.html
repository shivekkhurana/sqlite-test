<!DOCTYPE html>
<html>
<head>
    <title>The SQLite Optimization Journey</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 40px auto; max-width: 1200px; line-height: 1.6; color: #333; }
        h1, h2, h3 { color: #2c3e50; }
        .summary-table { border-collapse: collapse; width: 100%; margin: 20px 0; font-size: 0.9em; }
        .summary-table th, .summary-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        .summary-table th { background-color: #f8f9fa; font-weight: 600; }
        .hero { background: #f8f9fa; padding: 40px; border-radius: 12px; margin-bottom: 30px; }
        .hero h1 { margin-top: 0; font-size: 2.5em; }
        .callout { background: #fff; border: 1px solid #eee; border-radius: 12px; padding: 18px 20px; margin: 18px 0; }
        .journey-nav { display: flex; gap: 10px; margin: 18px 0; overflow-x: auto; padding-bottom: 10px; }
        .nav-item { padding: 8px 16px; background: #eee; border-radius: 20px; text-decoration: none; color: #666; font-size: 0.8em; white-space: nowrap; }
        .nav-item:hover { background: #ddd; }
        .stage-container { margin-top: 30px; padding: 20px; border: 1px solid #eee; border-radius: 8px; }
        .stage-header { display: flex; align-items: center; gap: 15px; margin-bottom: 10px; }
        .stage-id { background: #333; color: white; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; border-radius: 50%; font-weight: bold; }
        .stage-title { font-size: 1.35em; font-weight: bold; color: #2c3e50; }
        .stage-desc { color: #7f8c8d; font-style: italic; margin-bottom: 18px; }
        .charts-row { display: flex; flex-wrap: wrap; gap: 20px; }
        hr { border: none; border-top: 1px solid #eee; margin: 50px 0; }
        div[id^="ladder-"], div[id^="delta-"], div[id^="fail-lock-"], div[id^="ops-"], div[id^="p99-"] {
            min-height: 300px;
            width: 100%;
            margin: 20px 0;
        }
        .vega-embed {
            width: 100% !important;
        }
        .vega-embed svg {
            width: 100% !important;
            height: auto !important;
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>The SQLite Optimization Journey</h1>
        <p>A step-by-step evolution of SQLite write performance. (Stage charts show P99 + lock errors only.)</p>
    </div>

    <h2>What Each Knob Buys You</h2>
    <div class="callout">
        <strong>Knob ladder</strong> (P99 latency). This is the primary "story" chart showing optimization impact at different concurrency levels.
    </div>
    
        <h3>Concurrency = 16</h3>
        <div id="ladder-gf4g057cg"></div><script>
        (function() {
            let attempts = 0;
            const maxAttempts = 100;
            function embed() {
                attempts++;
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#ladder-gf4g057cg', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"step":"A: Baseline","p99":2.6641339999914635,"type":"Baseline (High Failure)"},{"step":"B: Busy Timeout 5s","p99":253.03985900012776,"type":"Optimization"},{"step":"C: Busy Timeout 2s","p99":289.97224400006235,"type":"Optimization"},{"step":"D: Busy Timeout 400ms","p99":255.13572099991143,"type":"Optimization"},{"step":"E: WAL Mode","p99":114.65533400001004,"type":"Optimization"},{"step":"F: WAL + Sync NORMAL","p99":121.70975300006103,"type":"Optimization"},{"step":"G: WAL + NORMAL + Checkpoint 2k","p99":119.54462400008924,"type":"Optimization"},{"step":"H: WAL + NORMAL + Checkpoint 4k","p99":119.14742499997374,"type":"Optimization"},{"step":"I: WAL + NORMAL + Checkpoint 4k + 1GB MMAP","p99":139.74099999992177,"type":"Optimization"}]},"width":1000,"height":280,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"step","type":"ordinal","title":"Optimization Step","axis":{"labelAngle":-30}},"y":{"field":"p99","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log"}},"color":{"field":"type","type":"nominal","title":"Type","scale":{"domain":["Baseline (High Failure)","Optimization"],"range":["#e74c3c","#4c78a8"]}}}})
                        .then((result) => {
                            console.log('[Knob Ladder] Chart ladder-gf4g057cg rendered successfully with 9 data points');
                            console.log('[Knob Ladder] Chart view:', result.view);
                            const container = document.getElementById('ladder-gf4g057cg');
                            if (container) {
                                const svg = container.querySelector('svg');
                                if (svg) {
                                    console.log('[Knob Ladder] SVG found, dimensions:', svg.getAttribute('width'), 'x', svg.getAttribute('height'));
                                } else {
                                    console.warn('[Knob Ladder] No SVG found in container');
                                }
                            }
                        })
                        .catch((error) => {
                            console.error('[Knob Ladder] Error rendering chart ladder-gf4g057cg:', error);
                            const container = document.getElementById('ladder-gf4g057cg');
                            if (container) {
                                const errorMsg = error.message || String(error);
                                container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Chart rendering error:</strong> ' + errorMsg + '<br><small>Data points: 9, Concurrency: 16</small><br><pre style="font-size: 10px; overflow: auto; max-height: 200px;">' + "[{\"step\":\"A: Baseline\",\"p99\":2.6641339999914635,\"type\":\"Baseline (High Failure)\"},{\"step\":\"B: Busy Timeout 5s\",\"p99\":253.03985900012776,\"type\":\"Optimization\"},{\"step\":\"C: Busy Timeout 2s\",\"p99\":289.97224400006235,\"type\":\"Optimization\"},{\"step\":\"D: Busy Timeout 400ms\",\"p99\":255.13572099991143,\"type\":\"Optimization\"},{\"step\":\"E: WAL Mode\",\"p99\":114.65533400001004,\"type\":\"Optimization\"},{\"step\":\"F: WAL + Sync NORMAL\",\"p99\":121.70975300006103,\"type\":\"Optimization\"},{\"step\":\"G: WAL + NORMAL + Checkpoint 2k\",\"p99\":119.54462400008924,\"type\":\"Optimization\"},{\"step\":\"H: WAL + NORMAL + Checkpoint 4k\",\"p99\":119.14742499997374,\"type\":\"Optimization\"},{\"step\":\"I: WAL + NORMAL + Checkpoint 4k + 1GB MMAP\",\"p99\":139.74099999992177,\"type\":\"Optimization\"}]" + '</pre></div>';
                            }
                        });
                } else if (attempts < maxAttempts) {
                    setTimeout(embed, 50);
                } else {
                    console.error('[Knob Ladder] vegaEmbed not available after ' + maxAttempts + ' attempts');
                    const container = document.getElementById('ladder-gf4g057cg');
                    if (container) {
                        container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Error:</strong> Vega-Lite library failed to load. Please check your internet connection and ensure CDN scripts are accessible.</div>';
                    }
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    
        <h3>Concurrency = 8</h3>
        <div id="ladder-4y7me33ad"></div><script>
        (function() {
            let attempts = 0;
            const maxAttempts = 100;
            function embed() {
                attempts++;
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#ladder-4y7me33ad', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"step":"A: Baseline","p99":1.7651130000012927,"type":"Baseline (High Failure)"},{"step":"B: Busy Timeout 5s","p99":91.16516699991189,"type":"Optimization"},{"step":"C: Busy Timeout 2s","p99":92.52703699993435,"type":"Optimization"},{"step":"D: Busy Timeout 400ms","p99":92.72784500010312,"type":"Optimization"},{"step":"E: WAL Mode","p99":61.43524200003594,"type":"Optimization"},{"step":"F: WAL + Sync NORMAL","p99":59.18545699992683,"type":"Optimization"},{"step":"G: WAL + NORMAL + Checkpoint 2k","p99":61.42211199994199,"type":"Optimization"},{"step":"H: WAL + NORMAL + Checkpoint 4k","p99":61.84805499995127,"type":"Optimization"},{"step":"I: WAL + NORMAL + Checkpoint 4k + 1GB MMAP","p99":63.078645000001416,"type":"Optimization"}]},"width":1000,"height":280,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"step","type":"ordinal","title":"Optimization Step","axis":{"labelAngle":-30}},"y":{"field":"p99","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log"}},"color":{"field":"type","type":"nominal","title":"Type","scale":{"domain":["Baseline (High Failure)","Optimization"],"range":["#e74c3c","#4c78a8"]}}}})
                        .then((result) => {
                            console.log('[Knob Ladder] Chart ladder-4y7me33ad rendered successfully with 9 data points');
                            console.log('[Knob Ladder] Chart view:', result.view);
                            const container = document.getElementById('ladder-4y7me33ad');
                            if (container) {
                                const svg = container.querySelector('svg');
                                if (svg) {
                                    console.log('[Knob Ladder] SVG found, dimensions:', svg.getAttribute('width'), 'x', svg.getAttribute('height'));
                                } else {
                                    console.warn('[Knob Ladder] No SVG found in container');
                                }
                            }
                        })
                        .catch((error) => {
                            console.error('[Knob Ladder] Error rendering chart ladder-4y7me33ad:', error);
                            const container = document.getElementById('ladder-4y7me33ad');
                            if (container) {
                                const errorMsg = error.message || String(error);
                                container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Chart rendering error:</strong> ' + errorMsg + '<br><small>Data points: 9, Concurrency: 8</small><br><pre style="font-size: 10px; overflow: auto; max-height: 200px;">' + "[{\"step\":\"A: Baseline\",\"p99\":1.7651130000012927,\"type\":\"Baseline (High Failure)\"},{\"step\":\"B: Busy Timeout 5s\",\"p99\":91.16516699991189,\"type\":\"Optimization\"},{\"step\":\"C: Busy Timeout 2s\",\"p99\":92.52703699993435,\"type\":\"Optimization\"},{\"step\":\"D: Busy Timeout 400ms\",\"p99\":92.72784500010312,\"type\":\"Optimization\"},{\"step\":\"E: WAL Mode\",\"p99\":61.43524200003594,\"type\":\"Optimization\"},{\"step\":\"F: WAL + Sync NORMAL\",\"p99\":59.18545699992683,\"type\":\"Optimization\"},{\"step\":\"G: WAL + NORMAL + Checkpoint 2k\",\"p99\":61.42211199994199,\"type\":\"Optimization\"},{\"step\":\"H: WAL + NORMAL + Checkpoint 4k\",\"p99\":61.84805499995127,\"type\":\"Optimization\"},{\"step\":\"I: WAL + NORMAL + Checkpoint 4k + 1GB MMAP\",\"p99\":63.078645000001416,\"type\":\"Optimization\"}]" + '</pre></div>';
                            }
                        });
                } else if (attempts < maxAttempts) {
                    setTimeout(embed, 50);
                } else {
                    console.error('[Knob Ladder] vegaEmbed not available after ' + maxAttempts + ' attempts');
                    const container = document.getElementById('ladder-4y7me33ad');
                    if (container) {
                        container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Error:</strong> Vega-Lite library failed to load. Please check your internet connection and ensure CDN scripts are accessible.</div>';
                    }
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    

    <h2>Baseline Deltas (P99)</h2>
    <div class="callout">
        <strong>P99 improvement vs baseline</strong> (percentage). This makes step changes obvious.
    </div>
    <div id="delta-y4qytr8a2"></div><script>
        (function() {
            let attempts = 0;
            const maxAttempts = 100;
            function embed() {
                attempts++;
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#delta-y4qytr8a2', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"scenario":"busyTimeout1","concurrency":1,"improvement":18.67465738372916},{"scenario":"busyTimeout1","concurrency":2,"improvement":-224.08102446097766},{"scenario":"busyTimeout1","concurrency":4,"improvement":-1460.229237016215},{"scenario":"busyTimeout1","concurrency":8,"improvement":-5064.834602648393},{"scenario":"busyTimeout1","concurrency":16,"improvement":-9398.015452711408},{"scenario":"busyTimeout1","concurrency":32,"improvement":-24269.046274681576},{"scenario":"busyTimeout1","concurrency":64,"improvement":-1357.1455730781634},{"scenario":"busyTimeout1","concurrency":128,"improvement":-454.2032592319583},{"scenario":"busyTimeout2000","concurrency":1,"improvement":-15.45531799841709},{"scenario":"busyTimeout2000","concurrency":2,"improvement":-249.29733336520968},{"scenario":"busyTimeout2000","concurrency":4,"improvement":-1488.7201950259691},{"scenario":"busyTimeout2000","concurrency":8,"improvement":-5141.989436362805},{"scenario":"busyTimeout2000","concurrency":16,"improvement":-10784.296510648168},{"scenario":"busyTimeout2000","concurrency":32,"improvement":-24517.065825700054},{"scenario":"busyTimeout2000","concurrency":64,"improvement":-1948.1237534384284},{"scenario":"busyTimeout2000","concurrency":128,"improvement":-325.72433118544444},{"scenario":"busyTimeout400","concurrency":1,"improvement":-15.585395310457676},{"scenario":"busyTimeout400","concurrency":2,"improvement":-250.0999103584565},{"scenario":"busyTimeout400","concurrency":4,"improvement":-1490.8185313408721},{"scenario":"busyTimeout400","concurrency":8,"improvement":-5153.365931814858},{"scenario":"busyTimeout400","concurrency":16,"improvement":-9476.684994100482},{"scenario":"busyTimeout400","concurrency":32,"improvement":-15671.881710990208},{"scenario":"busyTimeout400","concurrency":64,"improvement":-428.2870943254341},{"scenario":"busyTimeout400","concurrency":128,"improvement":-15.78132198616064},{"scenario":"wal","concurrency":1,"improvement":7.188149275722347},{"scenario":"wal","concurrency":2,"improvement":-73.5533674082551},{"scenario":"wal","concurrency":4,"improvement":-671.3433630844925},{"scenario":"wal","concurrency":8,"improvement":-3380.527422323157},{"scenario":"wal","concurrency":16,"improvement":-4203.6624284055315},{"scenario":"wal","concurrency":32,"improvement":-7360.732327868469},{"scenario":"wal","concurrency":64,"improvement":-1072.8811415173575},{"scenario":"wal","concurrency":128,"improvement":-281.6090366980003},{"scenario":"walSyncNormal","concurrency":1,"improvement":24.16866079027841},{"scenario":"walSyncNormal","concurrency":2,"improvement":-54.85902161195219},{"scenario":"walSyncNormal","concurrency":4,"improvement":-676.9160751623764},{"scenario":"walSyncNormal","concurrency":8,"improvement":-3253.069010306053},{"scenario":"walSyncNormal","concurrency":16,"improvement":-4468.45462729919},{"scenario":"walSyncNormal","concurrency":32,"improvement":-8035.674685786153},{"scenario":"walSyncNormal","concurrency":64,"improvement":-935.8817400437624},{"scenario":"walSyncNormal","concurrency":128,"improvement":-182.42043298510066},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":1,"improvement":-29.549772498346872},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":2,"improvement":-84.67695417531851},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":4,"improvement":-684.7232989901352},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":8,"improvement":-3379.783560593402},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":16,"improvement":-4387.185104070301},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":32,"improvement":-8985.095826238707},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":64,"improvement":-566.0875358661999},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":128,"improvement":-153.26011014293036},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":1,"improvement":-31.74538269970984},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":2,"improvement":-99.5121178538227},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":4,"improvement":-685.5331013270686},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":8,"improvement":-3403.9147635253935},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":16,"improvement":-4372.275981626882},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":32,"improvement":-8938.348354726211},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":64,"improvement":-563.3294032851077},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":128,"improvement":-172.13225575293015},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":1,"improvement":-41.97283724925153},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":2,"improvement":-77.96925802646282},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":4,"improvement":-673.9506523754457},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":8,"improvement":-3473.6321130689776},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":16,"improvement":-5145.269194431268},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":32,"improvement":-7324.750291513495},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":64,"improvement":-685.3526194219759},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":128,"improvement":-147.04084829804555}]},"width":1000,"height":360,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"improvement","type":"quantitative","title":"P99 Improvement vs Baseline (%)","scale":{"type":"symlog","constant":10}},"color":{"field":"scenario","type":"nominal","title":"Scenario"}}})
                        .then((result) => {
                            console.log('[Baseline Deltas] Chart delta-y4qytr8a2 rendered successfully with 64 data points');
                            console.log('[Baseline Deltas] Chart view:', result.view);
                            const container = document.getElementById('delta-y4qytr8a2');
                            if (container) {
                                const svg = container.querySelector('svg');
                                if (svg) {
                                    console.log('[Baseline Deltas] SVG found, dimensions:', svg.getAttribute('width'), 'x', svg.getAttribute('height'));
                                } else {
                                    console.warn('[Baseline Deltas] No SVG found in container');
                                }
                            }
                        })
                        .catch((error) => {
                            console.error('[Baseline Deltas] Error rendering chart delta-y4qytr8a2:', error);
                            const container = document.getElementById('delta-y4qytr8a2');
                            if (container) {
                                const errorMsg = error.message || String(error);
                                container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Chart rendering error:</strong> ' + errorMsg + '<br><small>Data points: 64, Scenarios: 8</small><br><pre style="font-size: 10px; overflow: auto; max-height: 200px;">' + "[{\"scenario\":\"busyTimeout1\",\"concurrency\":1,\"improvement\":18.67465738372916},{\"scenario\":\"busyTimeout1\",\"concurrency\":2,\"improvement\":-224.08102446097766},{\"scenario\":\"busyTimeout1\",\"concurrency\":4,\"improvement\":-1460.229237016215},{\"scenario\":\"busyTimeout1\",\"concurrency\":8,\"improvement\":-5064.834602648393},{\"scenario\":\"busyTimeout1\",\"concurrency\":16,\"improvement\":-9398.015452711408},{\"scenario\":\"busyTimeout1\",\"concurrency\":32,\"improvement\":-24269.046274681576},{\"scenario\":\"busyTimeout1\",\"concurrency\":64,\"improvement\":-1357.1455730781634},{\"scenario\":\"busyTimeout1\",\"concurrency\":128,\"improvement\":-454.2032592319583},{\"scenario\":\"busyTimeout2000\",\"concurrency\":1,\"improvement\":-15.45531799841709},{\"scenario\":\"busyTimeout2000\",\"concurrency\":2,\"improvement\":-249.29733336520968}]" + '</pre></div>';
                            }
                        });
                } else if (attempts < maxAttempts) {
                    setTimeout(embed, 50);
                } else {
                    console.error('[Baseline Deltas] vegaEmbed not available after ' + maxAttempts + ' attempts');
                    const container = document.getElementById('delta-y4qytr8a2');
                    if (container) {
                        container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Error:</strong> Vega-Lite library failed to load. Please check your internet connection and ensure CDN scripts are accessible.</div>';
                    }
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>

    <h2>Preventing Failure (busy_timeout)</h2>
    <div class="callout">
        Busy timeout primarily changes <strong>lock errors</strong> (survivability), not performance. This chart isolates that effect.
    </div>
    <div id="fail-lock-87n4bzh9f"></div><script>
        (function() {
            let attempts = 0;
            const maxAttempts = 100; // 5 seconds max wait
            function embed() {
                attempts++;
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#fail-lock-87n4bzh9f', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"scenario":"base0","concurrency":1,"lockErrors":0,"successRate":100},{"scenario":"base0","concurrency":2,"lockErrors":49998,"successRate":50.002},{"scenario":"base0","concurrency":4,"lockErrors":75031,"successRate":24.969},{"scenario":"base0","concurrency":8,"lockErrors":89232,"successRate":10.768},{"scenario":"base0","concurrency":16,"lockErrors":98326,"successRate":1.6740000000000002},{"scenario":"base0","concurrency":32,"lockErrors":97988,"successRate":2.012},{"scenario":"base0","concurrency":64,"lockErrors":98839,"successRate":1.161},{"scenario":"base0","concurrency":128,"lockErrors":99069,"successRate":0.931},{"scenario":"busyTimeout1","concurrency":1,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":2,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":4,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":8,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":16,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":32,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":64,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout1","concurrency":128,"lockErrors":5,"successRate":99.995},{"scenario":"busyTimeout2000","concurrency":1,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":2,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":4,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":8,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":16,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":32,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout2000","concurrency":64,"lockErrors":354,"successRate":99.646},{"scenario":"busyTimeout2000","concurrency":128,"lockErrors":1851,"successRate":98.149},{"scenario":"busyTimeout400","concurrency":1,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout400","concurrency":2,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout400","concurrency":4,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout400","concurrency":8,"lockErrors":0,"successRate":100},{"scenario":"busyTimeout400","concurrency":16,"lockErrors":74,"successRate":99.926},{"scenario":"busyTimeout400","concurrency":32,"lockErrors":2744,"successRate":97.256},{"scenario":"busyTimeout400","concurrency":64,"lockErrors":19142,"successRate":80.85799999999999},{"scenario":"busyTimeout400","concurrency":128,"lockErrors":43582,"successRate":56.418}]},"width":1000,"height":360,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"lockErrors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,100000]}},"color":{"field":"scenario","type":"nominal","title":"Scenario"}}})
                        .then((result) => {
                            console.log('Chart fail-lock-87n4bzh9f rendered successfully');
                        })
                        .catch((error) => {
                            console.error('Error rendering chart fail-lock-87n4bzh9f:', error);
                            const container = document.getElementById('fail-lock-87n4bzh9f');
                            if (container) {
                                container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Chart rendering error:</strong> ' + error.message + '<br><small>Data points: 32</small></div>';
                            }
                        });
                } else if (attempts < maxAttempts) {
                    setTimeout(embed, 50);
                } else {
                    console.error('vegaEmbed not available after ' + maxAttempts + ' attempts');
                    const container = document.getElementById('fail-lock-87n4bzh9f');
                    if (container) {
                        container.innerHTML = '<div style="padding: 20px; background: #fee; border: 1px solid #fcc; border-radius: 4px;"><strong>Error:</strong> Vega-Lite library failed to load. Please check your internet connection and ensure CDN scripts are accessible.</div>';
                    }
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>

    <hr />

    <h2>The Incremental Evolution</h2>
    <div class="journey-nav">
        <a href="#stage-A" class="nav-item">A: Baseline</a><a href="#stage-B" class="nav-item">B: Busy Timeout 5s</a><a href="#stage-C" class="nav-item">C: Busy Timeout 2s</a><a href="#stage-D" class="nav-item">D: Busy Timeout 400ms</a><a href="#stage-E" class="nav-item">E: WAL Mode</a><a href="#stage-F" class="nav-item">F: WAL + Sync NORMAL</a><a href="#stage-G" class="nav-item">G: WAL + NORMAL + Checkpoint 2k</a><a href="#stage-H" class="nav-item">H: WAL + NORMAL + Checkpoint 4k</a><a href="#stage-I" class="nav-item">I: WAL + NORMAL + Checkpoint 4k + 1GB MMAP</a>
    </div>
    <div id="stage-A">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">A</span>
            <div class="stage-title">Baseline</div>
        </div>
        <p class="stage-desc">SQLite defaults, no busy timeout</p>
        <div class="charts-row">
            <div id="lat-stage-A-3ir7g"></div>
            <div id="err-stage-A-3ir7g"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-A-3ir7g', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.6874580000003334},{"concurrency":2,"value":1.426779000001261},{"concurrency":4,"value":1.3930560000007972},{"concurrency":8,"value":1.7651130000012927},{"concurrency":16,"value":2.6641339999914635},{"concurrency":32,"value":2.7063560000096913},{"concurrency":64,"value":83.71229200001108},{"concurrency":128,"value":470.4476790000044}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,500]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-A-3ir7g', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":49998,"successRate":50.002},{"concurrency":4,"errors":75031,"successRate":24.969},{"concurrency":8,"errors":89232,"successRate":10.768},{"concurrency":16,"errors":98326,"successRate":1.6740000000000002},{"concurrency":32,"errors":97988,"successRate":2.012},{"concurrency":64,"errors":98839,"successRate":1.161},{"concurrency":128,"errors":99069,"successRate":0.931}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,100000]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-B">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">B</span>
            <div class="stage-title">Busy Timeout 5s</div>
        </div>
        <p class="stage-desc">PRAGMA busy_timeout = 5000ms</p>
        <div class="charts-row">
            <div id="lat-stage-B-rtu6s"></div>
            <div id="err-stage-B-rtu6s"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-B-rtu6s', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.3723310000059428},{"concurrency":2,"value":4.623919999998179},{"concurrency":4,"value":21.73486700002104},{"concurrency":8,"value":91.16516699991189},{"concurrency":16,"value":253.03985900012776},{"concurrency":32,"value":659.513145999983},{"concurrency":64,"value":1219.809957000427},{"concurrency":128,"value":2607.2363699991256}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,5000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-B-rtu6s', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":0,"successRate":100},{"concurrency":128,"errors":5,"successRate":99.995}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,5]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-C">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">C</span>
            <div class="stage-title">Busy Timeout 2s</div>
        </div>
        <p class="stage-desc">PRAGMA busy_timeout = 2000ms</p>
        <div class="charts-row">
            <div id="lat-stage-C-or9ag"></div>
            <div id="err-stage-C-or9ag"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-C-or9ag', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.948259999990114},{"concurrency":2,"value":4.9837010000192095},{"concurrency":4,"value":22.131762000033632},{"concurrency":8,"value":92.52703699993435},{"concurrency":16,"value":289.97224400006235},{"concurrency":32,"value":666.2254380001687},{"concurrency":64,"value":1714.531336999964},{"concurrency":128,"value":2002.8102350002155}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,5000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-C-or9ag', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":354,"successRate":99.646},{"concurrency":128,"errors":1851,"successRate":98.149}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,2000]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-D">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">D</span>
            <div class="stage-title">Busy Timeout 400ms</div>
        </div>
        <p class="stage-desc">PRAGMA busy_timeout = 400ms</p>
        <div class="charts-row">
            <div id="lat-stage-D-nesdo"></div>
            <div id="err-stage-D-nesdo"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-D-nesdo', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.9504549999983283},{"concurrency":2,"value":4.995152000017697},{"concurrency":4,"value":22.160992999968585},{"concurrency":8,"value":92.72784500010312},{"concurrency":16,"value":255.13572099991143},{"concurrency":32,"value":426.84326699981466},{"concurrency":64,"value":442.24123500008136},{"concurrency":128,"value":544.6905419994146}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,1000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-D-nesdo', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":74,"successRate":99.926},{"concurrency":32,"errors":2744,"successRate":97.256},{"concurrency":64,"errors":19142,"successRate":80.85799999999999},{"concurrency":128,"errors":43582,"successRate":56.418}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,50000]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-E">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">E</span>
            <div class="stage-title">WAL Mode</div>
        </div>
        <p class="stage-desc">journal_mode=WAL, busy_timeout=2000ms</p>
        <div class="charts-row">
            <div id="lat-stage-E-eoy4v"></div>
            <div id="err-stage-E-eoy4v"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-E-eoy4v', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.5661609999951907},{"concurrency":2,"value":2.4762229999760166},{"concurrency":4,"value":10.745245000056457},{"concurrency":8,"value":61.43524200003594},{"concurrency":16,"value":114.65533400001004},{"concurrency":32,"value":201.91397699993104},{"concurrency":64,"value":981.8456860000733},{"concurrency":128,"value":1795.2708560000174}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-E-eoy4v', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":3,"successRate":99.997},{"concurrency":128,"errors":468,"successRate":99.532}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,500]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-F">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">F</span>
            <div class="stage-title">WAL + Sync NORMAL</div>
        </div>
        <p class="stage-desc">journal_mode=WAL, synchronous=NORMAL, busy_timeout=2000ms</p>
        <div class="charts-row">
            <div id="lat-stage-F-dx34l"></div>
            <div id="err-stage-F-dx34l"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-F-dx34l', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":1.2796220000018366},{"concurrency":2,"value":2.209495999966748},{"concurrency":4,"value":10.822876000020187},{"concurrency":8,"value":59.18545699992683},{"concurrency":16,"value":121.70975300006103},{"concurrency":32,"value":220.18032000004314},{"concurrency":64,"value":867.1603470002301},{"concurrency":128,"value":1328.640372000169}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-F-dx34l', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":0,"successRate":100},{"concurrency":128,"errors":37,"successRate":99.96300000000001}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,50]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-G">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">G</span>
            <div class="stage-title">WAL + NORMAL + Checkpoint 2k</div>
        </div>
        <p class="stage-desc">wal_autocheckpoint=2000</p>
        <div class="charts-row">
            <div id="lat-stage-G-m6dlq"></div>
            <div id="err-stage-G-m6dlq"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-G-m6dlq', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":2.186098000005586},{"concurrency":2,"value":2.6349320000153966},{"concurrency":4,"value":10.931634999986272},{"concurrency":8,"value":61.42211199994199},{"concurrency":16,"value":119.54462400008924},{"concurrency":32,"value":245.8750360000413},{"concurrency":64,"value":557.5971429999918},{"concurrency":128,"value":1191.4563100002706}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-G-m6dlq', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":0,"successRate":100},{"concurrency":128,"errors":1,"successRate":99.99900000000001}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,1]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-H">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">H</span>
            <div class="stage-title">WAL + NORMAL + Checkpoint 4k</div>
        </div>
        <p class="stage-desc">wal_autocheckpoint=4000</p>
        <div class="charts-row">
            <div id="lat-stage-H-4jcsj"></div>
            <div id="err-stage-H-4jcsj"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-H-4jcsj', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":2.223147999997309},{"concurrency":2,"value":2.846596999996109},{"concurrency":4,"value":10.942916000029072},{"concurrency":8,"value":61.84805499995127},{"concurrency":16,"value":119.14742499997374},{"concurrency":32,"value":244.60988299991004},{"concurrency":64,"value":555.2882469999604},{"concurrency":128,"value":1280.2398810000159}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-H-4jcsj', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":0,"successRate":100},{"concurrency":128,"errors":29,"successRate":99.971}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,50]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div><div id="stage-I">
    <div class="stage-container">
        <div class="stage-header">
            <span class="stage-id">I</span>
            <div class="stage-title">WAL + NORMAL + Checkpoint 4k + 1GB MMAP</div>
        </div>
        <p class="stage-desc">mmap_size=1GB</p>
        <div class="charts-row">
            <div id="lat-stage-I-ve548"></div>
            <div id="err-stage-I-ve548"></div>
        </div>
    </div>
    <script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#lat-stage-I-ve548', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"value":2.3957319999899482},{"concurrency":2,"value":2.53922799997963},{"concurrency":4,"value":10.781565999961458},{"concurrency":8,"value":63.078645000001416},{"concurrency":16,"value":139.74099999992177},{"concurrency":32,"value":200.9401750001125},{"concurrency":64,"value":657.4366780002601},{"concurrency":128,"value":1162.1979370000772}]},"width":500,"height":300,"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}}}}).catch(console.error);
                    vegaEmbed('#err-stage-I-ve548', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"concurrency":1,"errors":0,"successRate":100},{"concurrency":2,"errors":0,"successRate":100},{"concurrency":4,"errors":0,"successRate":100},{"concurrency":8,"errors":0,"successRate":100},{"concurrency":16,"errors":0,"successRate":100},{"concurrency":32,"errors":0,"successRate":100},{"concurrency":64,"errors":0,"successRate":100},{"concurrency":128,"errors":0,"successRate":100}]},"width":500,"height":300,"mark":{"type":"bar","tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"errors","type":"quantitative","title":"Lock Errors","scale":{"type":"symlog","domain":[0,1]}},"color":{"value":"#e74c3c"}}}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>
    </div>

    <hr />

    <h2>Comparative Analysis</h2>
    <h3>Writes Per Second (all scenarios)</h3>
    <div id="ops-bx0pfzwyd"></div><script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#ops-bx0pfzwyd', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"scenario":"base0","concurrency":1,"value":952.1218746779022},{"scenario":"base0","concurrency":2,"value":996.5362773848364},{"scenario":"base0","concurrency":4,"value":956.6005534368238},{"scenario":"base0","concurrency":8,"value":690.9083135182454},{"scenario":"base0","concurrency":16,"value":181.3070391112432},{"scenario":"base0","concurrency":32,"value":241.0898557228808},{"scenario":"base0","concurrency":64,"value":135.09399505582707},{"scenario":"base0","concurrency":128,"value":69.21572195242216},{"scenario":"busyTimeout1","concurrency":1,"value":982.7102231327108},{"scenario":"busyTimeout1","concurrency":2,"value":775.6912969502893},{"scenario":"busyTimeout1","concurrency":4,"value":335.1200251071127},{"scenario":"busyTimeout1","concurrency":8,"value":121.80719961108112},{"scenario":"busyTimeout1","concurrency":16,"value":84.45075839810706},{"scenario":"busyTimeout1","concurrency":32,"value":71.3938524521745},{"scenario":"busyTimeout1","concurrency":64,"value":66.38679917325841},{"scenario":"busyTimeout1","concurrency":128,"value":61.27826156920206},{"scenario":"busyTimeout2000","concurrency":1,"value":770.4978591775116},{"scenario":"busyTimeout2000","concurrency":2,"value":728.7795271186969},{"scenario":"busyTimeout2000","concurrency":4,"value":325.7045606179658},{"scenario":"busyTimeout2000","concurrency":8,"value":118.90622514241731},{"scenario":"busyTimeout2000","concurrency":16,"value":83.61320253801371},{"scenario":"busyTimeout2000","concurrency":32,"value":75.49499055500947},{"scenario":"busyTimeout2000","concurrency":64,"value":48.93447643132562},{"scenario":"busyTimeout2000","concurrency":128,"value":68.09951381166208},{"scenario":"busyTimeout400","concurrency":1,"value":750.1627304343498},{"scenario":"busyTimeout400","concurrency":2,"value":722.7102394397358},{"scenario":"busyTimeout400","concurrency":4,"value":325.5901093549932},{"scenario":"busyTimeout400","concurrency":8,"value":118.78735182695624},{"scenario":"busyTimeout400","concurrency":16,"value":84.86022621581894},{"scenario":"busyTimeout400","concurrency":32,"value":93.3674495179997},{"scenario":"busyTimeout400","concurrency":64,"value":115.7860915724319},{"scenario":"busyTimeout400","concurrency":128,"value":135.28273410788643},{"scenario":"wal","concurrency":1,"value":556.638536747916},{"scenario":"wal","concurrency":2,"value":644.4552265899722},{"scenario":"wal","concurrency":4,"value":496.3286700843251},{"scenario":"wal","concurrency":8,"value":222.9519123520267},{"scenario":"wal","concurrency":16,"value":214.07820131952937},{"scenario":"wal","concurrency":32,"value":210.47194733536912},{"scenario":"wal","concurrency":64,"value":100.9404094351442},{"scenario":"wal","concurrency":128,"value":92.73853384054163},{"scenario":"walSyncNormal","concurrency":1,"value":593.29630362713},{"scenario":"walSyncNormal","concurrency":2,"value":686.0086100627691},{"scenario":"walSyncNormal","concurrency":4,"value":443.0676635739424},{"scenario":"walSyncNormal","concurrency":8,"value":264.52592674020343},{"scenario":"walSyncNormal","concurrency":16,"value":192.503023670562},{"scenario":"walSyncNormal","concurrency":32,"value":199.62376005885625},{"scenario":"walSyncNormal","concurrency":64,"value":115.46151584933902},{"scenario":"walSyncNormal","concurrency":128,"value":123.20525061586618},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":1,"value":468.47701571699105},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":2,"value":606.5449322294277},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":4,"value":465.71004404865386},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":8,"value":241.25650147465666},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":16,"value":196.19482143483992},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":32,"value":189.6151847689},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":64,"value":174.4760692209986},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":128,"value":131.7218151841287},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":1,"value":459.35033342275517},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":2,"value":597.2906517866355},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":4,"value":465.1522740174197},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":8,"value":234.30980588563568},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":16,"value":195.7515335183005},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":32,"value":189.68526182532986},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":64,"value":179.91252852663095},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":128,"value":118.1649725304949},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":1,"value":498.20399987427027},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":2,"value":652.1739434092642},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":4,"value":458.78405311931704},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":8,"value":203.68822189433823},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":16,"value":174.10929836416906},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":32,"value":204.39883528191174},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":64,"value":136.68891307725553},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":128,"value":136.92173339886608}]},"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"Writes/sec","scale":{"type":"log","domain":[1,1000]}},"color":{"field":"scenario","type":"nominal","title":"Scenario"}},"width":1000,"height":360}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>

    <h3>P99 Latency (performance scenarios)</h3>
    <div id="p99-3gk6sei5l"></div><script>
        (function() {
            function embed() {
                if (typeof vegaEmbed !== 'undefined') {
                    vegaEmbed('#p99-3gk6sei5l', {"$schema":"https://vega.github.io/schema/vega-lite/v5.json","data":{"values":[{"scenario":"wal","concurrency":1,"value":1.5661609999951907},{"scenario":"wal","concurrency":2,"value":2.4762229999760166},{"scenario":"wal","concurrency":4,"value":10.745245000056457},{"scenario":"wal","concurrency":8,"value":61.43524200003594},{"scenario":"wal","concurrency":16,"value":114.65533400001004},{"scenario":"wal","concurrency":32,"value":201.91397699993104},{"scenario":"wal","concurrency":64,"value":981.8456860000733},{"scenario":"wal","concurrency":128,"value":1795.2708560000174},{"scenario":"walSyncNormal","concurrency":1,"value":1.2796220000018366},{"scenario":"walSyncNormal","concurrency":2,"value":2.209495999966748},{"scenario":"walSyncNormal","concurrency":4,"value":10.822876000020187},{"scenario":"walSyncNormal","concurrency":8,"value":59.18545699992683},{"scenario":"walSyncNormal","concurrency":16,"value":121.70975300006103},{"scenario":"walSyncNormal","concurrency":32,"value":220.18032000004314},{"scenario":"walSyncNormal","concurrency":64,"value":867.1603470002301},{"scenario":"walSyncNormal","concurrency":128,"value":1328.640372000169},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":1,"value":2.186098000005586},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":2,"value":2.6349320000153966},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":4,"value":10.931634999986272},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":8,"value":61.42211199994199},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":16,"value":119.54462400008924},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":32,"value":245.8750360000413},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":64,"value":557.5971429999918},{"scenario":"walSyncNormalAutocheckpoint2000","concurrency":128,"value":1191.4563100002706},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":1,"value":2.223147999997309},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":2,"value":2.846596999996109},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":4,"value":10.942916000029072},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":8,"value":61.84805499995127},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":16,"value":119.14742499997374},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":32,"value":244.60988299991004},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":64,"value":555.2882469999604},{"scenario":"walSyncNormalAutocheckpoint4000","concurrency":128,"value":1280.2398810000159},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":1,"value":2.3957319999899482},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":2,"value":2.53922799997963},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":4,"value":10.781565999961458},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":8,"value":63.078645000001416},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":16,"value":139.74099999992177},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":32,"value":200.9401750001125},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":64,"value":657.4366780002601},{"scenario":"walSyncNormalAutocheckpoint4000Mmap1gb","concurrency":128,"value":1162.1979370000772}]},"mark":{"type":"line","point":true,"tooltip":true},"encoding":{"x":{"field":"concurrency","type":"ordinal","title":"Concurrency"},"y":{"field":"value","type":"quantitative","title":"P99 Latency (ms)","scale":{"type":"log","domain":[0.1,2000]}},"color":{"field":"scenario","type":"nominal","title":"Scenario"}},"width":1000,"height":360}).catch(console.error);
                } else {
                    setTimeout(embed, 50);
                }
            }
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', embed);
            } else {
                embed();
            }
        })();
    </script>

    <div style="margin-top: 40px;">
        <h3>Scenario Configuration Reference</h3>
        <table class="summary-table">
            <thead><tr><th>ID</th><th>Scenario Name</th><th>Database Settings</th><th>Connection Settings</th></tr></thead>
            <tbody>
            <tr><td><strong>A</strong></td><td>base0</td><td>defaults</td><td>none</td></tr>
<tr><td><strong>B</strong></td><td>busyTimeout1</td><td>defaults</td><td>busy_timeout=5000ms</td></tr>
<tr><td><strong>C</strong></td><td>busyTimeout2000</td><td>defaults</td><td>busy_timeout=2000ms</td></tr>
<tr><td><strong>D</strong></td><td>busyTimeout400</td><td>defaults</td><td>busy_timeout=400ms</td></tr>
<tr><td><strong>E</strong></td><td>wal</td><td>journal_mode=WAL</td><td>busy_timeout=2000ms</td></tr>
<tr><td><strong>F</strong></td><td>walSyncNormal</td><td>journal_mode=WAL, sync=NORMAL</td><td>busy_timeout=2000ms</td></tr>
<tr><td><strong>G</strong></td><td>walSyncNormalAutocheckpoint2000</td><td>journal_mode=WAL, sync=NORMAL</td><td>busy_timeout=2000ms, wal_autocheckpoint=2000</td></tr>
<tr><td><strong>H</strong></td><td>walSyncNormalAutocheckpoint4000</td><td>journal_mode=WAL, sync=NORMAL</td><td>busy_timeout=2000ms, wal_autocheckpoint=4000</td></tr>
<tr><td><strong>I</strong></td><td>walSyncNormalAutocheckpoint4000Mmap1gb</td><td>journal_mode=WAL, sync=NORMAL</td><td>busy_timeout=2000ms, wal_autocheckpoint=4000, mmap=1GB</td></tr>
            </tbody>
        </table>
    </div>
</body>
</html>